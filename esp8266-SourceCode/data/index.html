<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Smart Green House</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
  <style>
    .humid-val {text-align: center; }
    .temp-val {text-align: center; }
    .hcsr-val {text-align: center; }
    .soil-val {text-align: center; }
    .ldr-val{ text-align: center;}
  </style>
    
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="card col-4">
        <h3 class="card-header">Humadity</h3>
        <div class="card-body">
          <div class="card-text text-primary">
              <h1 class="humid-val">VALUE</h1>
          </div> 
        </div>
      </div>
      <div class="card col-4">
        <h3 class="card-header">Temperature</h3>
        <div class="card-body">
          <div class="card-text text-primary">
              <h1 class="temp-val">VALUE</h1>
          </div> 
        </div>
      </div>
      <div class="card col-4">
        <h3 class="card-header">Hcsr (Ketinggian Air)</h3>
        <div class="card-body">
          <div class="card-text text-primary">
              <h1 class="hcsr-val">VALUE</h1>
          </div> 
        </div>
      </div>
      <div class="card col-6">
        <h3 class="card-header">Moisture Soil</h3>
        <div class="card-body">
          <div class="card-text text-primary">
              <h1 class="soil-val">VALUE</h1>
          </div>
        </div>
      </div>
      <div class="card col-6">
        <h3 class="card-header">LDR</h3>
        <div class="card-body">
          <div class="card-text text-primary">
              <h1 class="ldr-val">VALUE</h1>
          </div> 
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  var intervals = setInterval(function () {
    var humidhttp = new XMLHttpRequest(),
     temphttp = new XMLHttpRequest(),
      hcsrhttp = new XMLHttpRequest(),
       soilhttp = new XMLHttpRequest(),
        ldrhttp = new XMLHttpRequest();
    humidhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var valhumid = parseFloat(this.responseText);
        $(".humid-val").text("");
        $(".humid-val").text(valhumid.toFixed(0) + " %");
      }
    };
    temphttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var valtemp = parseFloat(this.responseText);
        $(".temp-val").text("");
        $(".temp-val").text(valtemp.toFixed(0) + " Â°C");
      }
    };
    hcsrhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var valhcsr = parseFloat(this.responseText);
        $(".hcsr-val").text("");
        $(".hcsr-val").text(valhcsr.toFixed(0) + " cm");
      }
    };
    soilhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var valsoil = parseFloat(this.responseText);
        $(".soil-val").text("");
        $(".soil-val").text(valsoil.toFixed(0) + " %");
      }
    };
    ldrhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var valldr = parseFloat(this.responseText);
        $(".ldr-val").text("");
        $(".ldr-val").text(valldr.toFixed(0) + " %");
      }
    };
    humidhttp.open("GET","/humid", true);
    humidhttp.send();
    temphttp.open("GET","/temp", true);
    temphttp.send();
    hcsrhttp.open("GET","/hcsr", true);
    hcsrhttp.send();
    soilhttp.open("GET","/soil", true);
    soilhttp.send();
    ldrhttp.open("GET","/ldr", true);
    ldrhttp.send();

  }, 2000);
</script>

</html>
